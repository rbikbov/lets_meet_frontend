import{p as y,G as V,c as h,r as p,w,k as O,ae as P,D,d as F,x as M,B as S}from"./index.be0786c9.js";import{b as B}from"./VProgressCircular.6cfce55a.js";const b=Symbol.for("vuetify:form"),j=y({disabled:Boolean,fastFail:Boolean,lazyValidation:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function x(f){const d=V(f,"modelValue"),c=h(()=>f.disabled),v=h(()=>f.readonly),i=p(!1),e=p([]),n=p([]);async function r(){const t=[];let o=!0;n.value=[],i.value=!0;for(const u of e.value){const s=await u.validate();if(s.length>0&&(o=!1,t.push({id:u.id,errorMessages:s})),!o&&f.fastFail)break}return n.value=t,i.value=!1,{valid:o,errors:n.value}}function a(){e.value.forEach(t=>t.reset()),d.value=null}function l(){e.value.forEach(t=>t.resetValidation()),n.value=[],d.value=null}return w(e,()=>{let t=0,o=0;const u=[];for(const s of e.value)s.isValid===!1?(o++,u.push({id:s.id,errorMessages:s.errorMessages})):s.isValid===!0&&t++;n.value=u,d.value=o>0?!1:t===e.value.length?!0:null},{deep:!0}),O(b,{register:t=>{let{id:o,validate:u,reset:s,resetValidation:m}=t;e.value.some(R=>R.id===o)&&P(`Duplicate input name "${o}"`),e.value.push({id:o,validate:u,reset:s,resetValidation:m,isValid:null,errorMessages:[]})},unregister:t=>{e.value=e.value.filter(o=>o.id!==t)},update:(t,o,u)=>{const s=e.value.find(m=>m.id===t);!s||(s.isValid=o,s.errorMessages=u)},isDisabled:c,isReadonly:v,isValidating:i,items:e,validateOn:D(f,"validateOn")}),{errors:n,isDisabled:c,isReadonly:v,isValidating:i,items:e,validate:r,reset:a,resetValidation:l}}function z(){return F(b,null)}const g=Symbol("Forwarded refs");function E(f){for(var d=arguments.length,c=new Array(d>1?d-1:0),v=1;v<d;v++)c[v-1]=arguments[v];return f[g]=c,new Proxy(f,{get(i,e){if(Reflect.has(i,e))return Reflect.get(i,e);for(const n of c)if(n.value&&Reflect.has(n.value,e)){const r=Reflect.get(n.value,e);return typeof r=="function"?r.bind(n.value):r}},getOwnPropertyDescriptor(i,e){const n=Reflect.getOwnPropertyDescriptor(i,e);if(n)return n;if(!(typeof e=="symbol"||e.startsWith("__"))){for(const r of c){if(!r.value)continue;const a=Reflect.getOwnPropertyDescriptor(r.value,e);if(a)return a;if("_"in r.value&&"setupState"in r.value._){const l=Reflect.getOwnPropertyDescriptor(r.value._.setupState,e);if(l)return l}}for(const r of c){let a=r.value&&Object.getPrototypeOf(r.value);for(;a;){const l=Reflect.getOwnPropertyDescriptor(a,e);if(l)return l;a=Object.getPrototypeOf(a)}}for(const r of c){const a=r.value&&r.value[g];if(!a)continue;const l=a.slice();for(;l.length;){const t=l.shift(),o=Reflect.getOwnPropertyDescriptor(t.value,e);if(o)return o;const u=t.value&&t.value[g];u&&l.push(...u)}}}}})}const A=M({name:"VForm",props:{...j()},emits:{"update:modelValue":f=>!0,submit:f=>!0},setup(f,d){let{slots:c,emit:v}=d;const i=x(f),e=p();function n(a){a.preventDefault(),i.reset()}function r(a){const l=a,t=i.validate();l.then=t.then.bind(t),l.catch=t.catch.bind(t),l.finally=t.finally.bind(t),v("submit",l),l.defaultPrevented||t.then(o=>{let{valid:u}=o;if(u){var s;(s=e.value)==null||s.submit()}}),l.preventDefault()}return B(()=>{var a;return S("form",{ref:e,class:"v-form",novalidate:!0,onReset:n,onSubmit:r},[(a=c.default)==null?void 0:a.call(c,i)])}),E(i,e)}});export{A as V,E as f,z as u};
